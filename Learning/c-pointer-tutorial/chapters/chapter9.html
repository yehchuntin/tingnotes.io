<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9. Character arrays and pointers - part 2 | C Pointer Tutorial</title>
    <meta name="description" content="æ·±å…¥è§£æå­—ä¸²å‚³éæ™‚çš„è¨˜æ†¶é«”èˆ‡ Stack é…ç½®ï¼Œä¸¦è¾¨åˆ¥å­—ä¸²é™£åˆ—èˆ‡å­—ä¸²å¸¸é‡çš„å·®ç•°ï¼Œäº†è§£å”¯è®€è¨˜æ†¶é«” (Read-Only Data Segment) çš„é‡è¦æ€§ã€‚">
    
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Fira+Code&display=swap" rel="stylesheet">
    
    <style>
        /* --- ç« ç¯€å…§é æ¨£å¼ (Zen Mode æ¨™æº– - åƒç…§ Chapter 4) --- */
        .zen-page-header, .chapter-content, .chapter-nav {
            max-width: 820px;         
            margin-left: 5%;          
            margin-right: auto;       
        }

        .chapter-content h2 {
            margin-top: 60px;
            margin-bottom: 30px;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .chapter-content h2 .section-num { 
            font-size: 1rem; 
            background: var(--accent-primary);
            color: #fff;
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: normal;
        }

        .chapter-content p {
            margin-bottom: 25px;
            font-size: 1.05rem;
            color: var(--text-secondary);
            line-height: 1.9;
            letter-spacing: 0.02em;
        }

        .chapter-content ul, .chapter-content ol {
            margin-bottom: 30px;
            padding-left: 20px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .chapter-content li { margin-bottom: 12px; }

        /* é‡é»æç¤ºæ¡† */
        .highlight-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--accent-primary);
            padding: 25px 30px;
            margin: 40px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .highlight-title {
            font-weight: bold;
            color: var(--accent-primary);
            margin-bottom: 15px;
            display: block;
            font-family: 'Fira Code', monospace;
            font-size: 1.1rem;
        }

        /* ç¨‹å¼ç¢¼å€å¡Š & è¤‡è£½æŒ‰éˆ• */
        .code-container { position: relative; margin: 40px 0; }
        
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 25px;
            padding-top: 45px;
            border-radius: 12px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.95rem;
            border: 1px solid #333;
            line-height: 1.6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }

        .copy-btn {
            position: absolute;
            top: 10px; right: 10px;
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: #ddd;
            padding: 6px 14px;
            border-radius: 6px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background-color: #ffffff;
            color: #000000;
            border-color: #ffffff;
            font-weight: bold;
        }
        
        .copy-btn.copied {
            background-color: rgba(255, 255, 255, 0.15);
            color: #ddd;
            border-color: #ffffff;
        }

        /* åœ–ç‰‡å®¹å™¨ - å›ºå®šé«˜åº¦æ¨£å¼ */
        .img-container {
            width: 100%;
            max-width: 700px;
            height: 400px; /* å›ºå®šé«˜åº¦ */
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin: 40px auto;
            
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }
        
        .img-container img {
            max-width: 95%;
            max-height: 95%; /* é™åˆ¶åœ–ç‰‡é«˜åº¦ */
            object-fit: contain; /* ä¿æŒæ¯”ä¾‹ */
            border-radius: 4px;
        }

        /* åº•éƒ¨å°èˆª */
        .chapter-nav {
            margin-top: 80px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .nav-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.4); 
            min-width: 120px;
        }

        .nav-btn:hover {
            background-color: #ffffff !important;
            color: #000000 !important;
            border-color: #ffffff !important;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,255,255,0.1);
            font-weight: 700;
        }
        .nav-btn.menu-btn { border: 1px solid rgba(255, 255, 255, 0.4); }

        @media (max-width: 1200px) {
            .zen-page-header, .chapter-content, .chapter-nav { margin-left: 20px; margin-right: 20px; }
        }
        @media (max-width: 768px) {
            .chapter-nav { flex-direction: column; }
            .nav-btn { width: 100%; }
            .img-container { height: 300px; } /* æ‰‹æ©Ÿç‰ˆé«˜åº¦èª¿æ•´ */
        }
        
        /* èªæ³•é«˜äº®æ¨£å¼ */
        .keyword{color:#ff79c6} .string{color:#f1fa8c} .comment{color:#6272a4} .number{color:#bd93f9} .function{color:#50fa7b} .type{color:#8be9fd}
    </style>
</head>
<body>
    
    <header class="zen-header">
        <div class="container">
            <nav>
                <a href="/" class="logo">TingNotes</a>
                <div class="nav-controls">
                    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ›æ¨¡å¼">
                        <svg class="theme-icon" id="theme-icon" width="20" height="20" viewBox="0 0 24 24"></svg>
                    </button>
                    <button class="menu-trigger" onclick="toggleMobileMenu()">
                        <span class="menu-label">MENU</span>
                        <div class="hamburger-icon"><span></span><span></span></div>
                    </button>
                </div>
                <div class="hidden-nav-overlay">
                    <ul class="nav-links-vertical">
                        <li><a href="/Learning/index.html" class="nav-item"><span class="nav-num">01.</span> å­¸ç¿’ Learning</a></li>
                        <li><a href="/Career/index.html" class="nav-item"><span class="nav-num">02.</span> è·æ¶¯ Career</a></li>
                        <li><a href="/Travel/index.html" class="nav-item"><span class="nav-num">03.</span> æ—…éŠ Travel</a></li>
                        <li><a href="/Others/index.html" class="nav-item"><span class="nav-num">04.</span> é›œäº‹ Others</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="zen-page-header fade-in">
                <div class="breadcrumb">
                    <a href="/Learning/c-pointer-tutorial/index.html">..</a> / Chapter <span id="chap-num-display">9</span>
                </div>
                <h1 class="page-title">Character arrays and pointers - part 2</h1>
                <p class="page-subtitle">è¨˜æ†¶é«”é…ç½®è§£æèˆ‡å”¯è®€è¨˜æ†¶é«”å€æ®µ</p>
            </div>

            <article class="chapter-content fade-in">
                
                <h2><span class="section-num">1</span> è¨˜æ†¶é«”èˆ‡Stackè§£æ</h2>
                <p>
                    ç•¶æˆ‘å€‘å°‡ä¸€å€‹å­—å…ƒé™£åˆ—ä½œç‚ºåƒæ•¸å‚³éçµ¦å‡½å¼æ™‚ï¼Œå¯¦éš›ç™¼ç”Ÿäº†ä»€éº¼äº‹ï¼Ÿç†è§£è¨˜æ†¶é«”å †ç–Š (Stack) çš„é‹ä½œæ–¹å¼è‡³é—œé‡è¦ã€‚
                </p>

                <div class="img-container">
                    <img src="images/explanationOfMemoryAndStack.png" alt="Memory and Stack Explanation">
                </div>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ’¡ é‡é»ç­†è¨˜</span>
                    <ul>
                        <li>ç•¶å‘¼å« <code>print(C)</code> æ™‚ï¼Œé™£åˆ— <code>C</code> æœƒè‡ªå‹•è½‰æ›æˆæŒ‡å‘å…¶é¦–å…ƒç´  (<code>C[0]</code>) çš„æŒ‡æ¨™ã€‚</li>
                        <li>åœ¨ <code>print()</code> å‡½å¼çš„å †ç–Šæ¡†æ¶ (stack frame) ä¸­ï¼Œæœƒå»ºç«‹ä¸€å€‹æ–°çš„æŒ‡æ¨™è®Šæ•¸ <code>C</code>ï¼Œé€™å€‹æŒ‡æ¨™çš„å€¼å°±æ˜¯ <code>main</code> å‡½å¼ä¸­é™£åˆ—çš„èµ·å§‹ä½å€ã€‚</li>
                        <li>å‡½å¼çµæŸå¾Œï¼Œ<code>print()</code> çš„å †ç–Šæ¡†æ¶ï¼ˆåŒ…æ‹¬å…¶å…§éƒ¨çš„æŒ‡æ¨™è®Šæ•¸ <code>C</code>ï¼‰æœƒè¢«é‡‹æ”¾ï¼Œä½† <code>main</code> å‡½å¼ä¸­åŸå§‹çš„é™£åˆ—å…§å®¹ä»ç„¶å­˜åœ¨ã€‚</li>
                    </ul>
                </div>

                <h2><span class="section-num">2</span> å”¯è®€è¨˜æ†¶é«” (Read-Only Data Segment)</h2>
                <p>
                    åœ¨è™•ç†å­—ä¸²æ™‚ï¼Œ<code>char C[] = "Hello";</code> å’Œ <code>char *C = "Hello";</code> é€™å…©ç¨®å¯«æ³•æœ‰è‘—æœ¬è³ªä¸Šçš„å€åˆ¥ï¼Œé€™é—œä¹åˆ°å­—ä¸²å¸¸æ•¸çš„å„²å­˜ä½ç½®ã€‚
                </p>

                <div class="code-container">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code><span class="comment">// string_memory_types.c</span>
<span class="keyword">#include</span> &lt;stdio.h&gt;

<span class="type">int</span> <span class="function">main</span>() {
    <span class="comment">// å¯«æ³•ä¸€ï¼šå­—ä¸²å­˜æ”¾åœ¨ Stack å€åŸŸçš„é™£åˆ—ä¸­ï¼Œå…§å®¹å¯ä¿®æ”¹</span>
    <span class="type">char</span> C1[] = <span class="string">"Hello"</span>;
    C1[<span class="number">0</span>] = <span class="string">'A'</span>;
    <span class="function">printf</span>(<span class="string">"C1: %s\n"</span>, C1); <span class="comment">// è¼¸å‡º "Aello"</span>

    <span class="comment">// å¯«æ³•äºŒï¼šå­—ä¸² "Hello" æ˜¯å¸¸é‡ï¼Œå­˜æ”¾åœ¨å”¯è®€è¨˜æ†¶é«”å€</span>
    <span class="type">char</span> *C2 = <span class="string">"Hello"</span>;
    <span class="comment">// C2[0] = 'A'; // âŒ éŒ¯èª¤ï¼é€™æœƒè©¦åœ–ä¿®æ”¹å”¯è®€è¨˜æ†¶é«”ï¼Œå°è‡´åŸ·è¡ŒæœŸéŒ¯èª¤ (Segmentation Fault)</span>
    <span class="function">printf</span>(<span class="string">"C2: %s\n"</span>, C2);

    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>
                </div>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ“Œ é‡é»ç¸½çµ</span>
                    <ul>
                        <li><strong>é™£åˆ—å®£å‘Š (<code>char C[]</code>)</strong>ï¼šæœƒåœ¨ Stack ä¸Šå»ºç«‹ä¸€å€‹æ–°çš„å­—å…ƒé™£åˆ—ï¼Œä¸¦å°‡å­—ä¸²å¸¸æ•¸çš„å…§å®¹<strong>è¤‡è£½</strong>é€²å»ã€‚é€™å€‹é™£åˆ—çš„å…§å®¹æ˜¯<strong>å¯ä»¥ä¿®æ”¹</strong>çš„ã€‚</li>
                        <li><strong>æŒ‡æ¨™æŒ‡å‘å­—ä¸²å¸¸é‡ (<code>char *C = "..."</code>)</strong>ï¼šæœƒè®“æŒ‡æ¨™ <code>C</code> ç›´æ¥æŒ‡å‘å„²å­˜åœ¨<strong>å”¯è®€è¨˜æ†¶é«”å€æ®µ (.rodata)</strong> çš„å­—ä¸²å¸¸æ•¸ "..."ã€‚ä»»ä½•è©¦åœ–é€éé€™å€‹æŒ‡æ¨™ä¿®æ”¹å­—ä¸²å…§å®¹çš„è¡Œç‚ºéƒ½æ˜¯æœªå®šç¾©çš„ï¼Œé€šå¸¸æœƒå°è‡´ç¨‹å¼å´©æ½° (Segmentation Fault)ã€‚</li>
                    </ul>
                </div>

                <p>
                    ç‚ºäº†å®‰å…¨èµ·è¦‹ï¼Œç•¶ä½¿ç”¨æŒ‡æ¨™æŒ‡å‘ä¸€å€‹å­—ä¸²å¸¸æ•¸æ™‚ï¼Œæœ€å¥½å°‡æŒ‡æ¨™å®£å‘Šç‚º <code>const char *</code>ï¼Œé€™æ¨£ç·¨è­¯å™¨å°±æœƒåœ¨ç·¨è­¯æ™‚æœŸæª¢æŸ¥ä¸¦é˜²æ­¢ä½ æ„å¤–åœ°ä¿®æ”¹å®ƒã€‚
                </p>

                <div class="code-container">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code><span class="keyword">const</span> <span class="type">char</span> *C = <span class="string">"Hello"</span>;
<span class="comment">// C[0] = 'A'; // âœ… ç·¨è­¯å™¨æœƒç›´æ¥å ±éŒ¯ï¼Œæå‰é˜²æ­¢åŸ·è¡ŒæœŸéŒ¯èª¤</span></code></pre>
                </div>

            </article>

            <div class="chapter-nav fade-in">
                <a href="chapter8.html" id="prev-btn" class="nav-btn">&lt; PREV</a>
                <a href="/Learning/c-pointer-tutorial/index.html" class="nav-btn menu-btn">MENU</a>
                <a href="chapter10.html" id="next-btn" class="nav-btn">NEXT &gt;</a>
            </div>
        </div>
    </main>

    <footer class="zen-footer">
        <div class="container">
            <div class="footer-links">
                <a href="/about.html">About</a>
                <a href="mailto:contact@tingnotes.io">Contact</a>
            </div>
            <p class="copyright">Â© 2025 TingNotes.io</p>
        </div>
    </footer>

    <script>
        function copyCode(btn) {
            const pre = btn.parentElement.querySelector('pre');
            if (!pre) return;
            const code = pre.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }
    </script>

    <script type="module" src="/script.js"></script>
    <script src="../js/chapter.js"></script>

</body>
</html>