<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16. Function Pointers and Callbacks | Cèªè¨€æŒ‡æ¨™æ•™å­¸</title>
  <meta name="description" content="æ·±å…¥æ¢è¨Cèªè¨€å‡½å¼æŒ‡æ¨™èˆ‡å›å‘¼å‡½å¼çš„æ‡‰ç”¨ï¼Œå­¸ç¿’callbackæ©Ÿåˆ¶èˆ‡å¯¦éš›ç¯„ä¾‹ã€‚" />
  <style>
    :root {
      --bg-primary: #fff;
      --bg-secondary: #f8f9fa;
      --bg-card: #fff;
      --text-primary: #2c3e50;
      --text-secondary: #6c757d;
      --accent-primary: #3498db;
      --accent-secondary: #2980b9;
      --border-color: #e9ecef;
      --shadow-light: rgba(0, 0, 0, .1);
      --shadow-medium: rgba(0, 0, 0, .15);
      --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --code-bg: #1e1e1e;
      --code-text: #f1fa8c;
      --theme-btn-bg: #f5f5f5;
      --theme-btn-border: #d1d5db;
      --theme-btn-icon: #6b7280;
    }
    [data-theme="dark"] {
      --bg-primary: #1a1a1a;
      --bg-secondary: #2d3748;
      --bg-card: #2d3748;
      --text-primary: #f7fafc;
      --text-secondary: #a0aec0;
      --accent-primary: #4299e1;
      --accent-secondary: #3182ce;
      --border-color: #4a5568;
      --shadow-light: rgba(0, 0, 0, .3);
      --shadow-medium: rgba(0, 0, 0, .4);
      --gradient-bg: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
      --code-bg: #1a202c;
      --code-text: #f1fa8c;
      --theme-btn-bg: rgba(255, 255, 255, 0.1);
      --theme-btn-border: rgba(255, 255, 255, 0.3);
      --theme-btn-icon: rgba(255, 255, 255, 0.8);
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: var(--text-primary);
      background: var(--gradient-bg);
      min-height: 100vh;
      transition: all .3s ease;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      display: grid;
      grid-template-columns: 280px 1fr;
      gap: 30px;
    }
    .sidebar {
      position: sticky;
      top: 20px;
      height: fit-content;
    }
    .toc-widget {
      background: var(--bg-card);
      border-radius: 15px;
      box-shadow: 0 8px 32px var(--shadow-light);
      border: 1px solid var(--border-color);
      overflow: hidden;
    }
    .toc-header {
      padding: 20px;
      border-bottom: 1px solid var(--border-color);
      text-align: center;
    }
    .toc-title {
      font-size: 1.1em;
      font-weight: 600;
      color: var(--text-primary);
    }
    .toc-body {
      padding: 15px;
      max-height: 70vh;
      overflow-y: auto;
    }
    .toc-list {
      list-style: none;
    }
    .toc-item {
      margin-bottom: 3px;
    }
    .toc-link {
      display: block;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 8px 12px;
      border-radius: 8px;
      transition: all .3s ease;
      font-size: .85em;
      line-height: 1.4;
    }
    .toc-link:hover {
      background: var(--bg-secondary);
      color: var(--accent-primary);
      transform: translateX(3px);
    }
    .toc-link.active {
      background: var(--accent-primary);
      color: #fff;
    }
    .toc-link.has-submenu {
      cursor: pointer;
      position: relative;
    }
    .arrow {
      display: inline-block;
      transition: transform .3s ease;
      margin-right: 8px;
      font-size: .7em;
      color: var(--accent-primary);
    }
    .arrow.expanded {
      transform: rotate(90deg);
    }
    .sub-menu {
      list-style: none;
      margin-left: 15px;
      margin-top: 5px;
      padding-left: 15px;
      border-left: 2px solid var(--border-color);
      max-height: 0;
      overflow: hidden;
      transition: max-height .4s ease;
    }
    .sub-menu.show {
      max-height: 400px;
      margin-bottom: 10px;
    }
    .sub-menu .toc-link {
      padding: 6px 10px;
      font-size: .8em;
    }
    .main-area {
      min-width: 0;
    }
    .header {
      background: var(--bg-card);
      border-radius: 15px;
      padding: 25px 30px;
      margin-bottom: 25px;
      box-shadow: 0 8px 32px var(--shadow-light);
      border: 1px solid var(--border-color);
      position: relative;
    }
    .theme-toggle {
        position: absolute;
        top: 20px;
        right: 20px;
        background: var(--theme-btn-bg);
        border: 2px solid var(--theme-btn-border);
        color: var(--theme-btn-icon);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .theme-toggle:hover {
        border-color: var(--accent-primary);
        background: var(--accent-primary);
        color: white;
        transform: scale(1.1);
    }

    .theme-icon {
        stroke: currentColor;
        fill: none;
        stroke-width: 2;
        transition: all 0.3s ease;
    }
    .breadcrumb {
      color: var(--text-secondary);
      font-size: .85em;
      margin-bottom: 12px;
    }
    .breadcrumb a {
      color: var(--accent-primary);
      text-decoration: none;
    }
    .breadcrumb a:hover {
      text-decoration: underline;
    }
    .chapter-title {
      font-size: 1.8em;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    .chapter-subtitle {
      color: var(--text-secondary);
      font-size: 1em;
    }
    .main-content {
      background: var(--bg-card);
      border-radius: 15px;
      box-shadow: 0 8px 32px var(--shadow-light);
      border: 1px solid var(--border-color);
      overflow: hidden;
      margin-bottom: 25px;
    }
    .content-section {
      padding: 30px;
      border-bottom: 1px solid var(--border-color);
    }
    .content-section:last-child {
      border-bottom: none;
    }
    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }
    .section-number {
      background: var(--accent-primary);
      color: #fff;
      width: 35px;
      height: 35px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: bold;
    }
    .section-title {
      font-size: 1.3em;
      font-weight: 600;
      color: var(--text-primary);
    }
    .content-text {
      color: var(--text-secondary);
      font-size: 1em;
      line-height: 1.6;
      margin-bottom: 15px;
    }
    .highlight-box {
        background: linear-gradient(135deg, var(--accent-primary)10%, var(--accent-secondary)10%);
        border-left: 4px solid var(--accent-primary);
        border-radius: 8px;
        padding: 18px;
        margin: 18px 0;
    }
    .highlight-title {
        color: var(--accent-primary);
        font-weight: 600;
        margin-bottom: 8px;
    }
    .bullet-list {
      list-style: none;
      margin: 12px 0;
    }
    .bullet-list li {
      position: relative;
      padding-left: 20px;
      margin-bottom: 6px;
      color: var(--text-secondary);
    }
    .bullet-list li:before {
      content: 'â€¢';
      color: var(--accent-primary);
      font-weight: bold;
      position: absolute;
      left: 0;
    }
    .bullet-list a:hover {
        color: var(--accent-secondary);    /* æ»‘é¼ ç§»éé€£çµæ™‚çš„é¡è‰² */
    }
    .nested-list {
      list-style: none;
      margin: 10px 0 10px 20px;
    }
    .nested-list li {
      position: relative;
      padding-left: 20px;
      margin-bottom: 6px;
      color: var(--text-secondary);
    }
    .nested-list li:before {
      content: 'â—‹';
      color: var(--accent-primary);
      font-weight: bold;
      position: absolute;
      left: 0;
    }
    .memory-diagram {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
        overflow: hidden;
    }
    
    .memory-diagram img {
        max-width: 100%;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 4px 12px var(--shadow-light);
        background: white;
        padding: 10px;
    }
    
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 0.9em;
      box-shadow: 0 4px 15px var(--shadow-light);
      border-radius: 8px;
      overflow: hidden;
    }
    .comparison-table th, .comparison-table td {
      border-bottom: 1px solid var(--border-color);
      padding: 12px 15px;
      text-align: left;
    }
    .comparison-table th {
      background-color: var(--bg-secondary);
      font-weight: 600;
    }
    .comparison-table tr:last-child td {
        border-bottom: none;
    }
    .comparison-table code { font-size: 1em; }
    .warning-box {
        background: linear-gradient(135deg, #f39c1210, #e67e2210);
        border-left: 4px solid #f39c12;
        border-radius: 8px;
        padding: 18px;
        margin: 18px 0;
    }
    .warning-title {
        color: #f39c12;
        font-weight: 600;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .success-box {
        background: linear-gradient(135deg, #27ae6010, #2ecc7110);
        border-left: 4px solid #27ae60;
        border-radius: 8px;
        padding: 18px;
        margin: 18px 0;
    }
    .success-title {
        color: #27ae60;
        font-weight: 600;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .danger-box {
        background: linear-gradient(135deg, #e7454410, #c0392b10);
        border-left: 4px solid #e74c3c;
        border-radius: 8px;
        padding: 18px;
        margin: 18px 0;
    }
    .danger-title {
        color: #e74c3c;
        font-weight: 600;
        margin-bottom: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--bg-card);
      border-radius: 15px;
      padding: 20px 25px;
      box-shadow: 0 8px 32px var(--shadow-light);
      border: 1px solid var(--border-color);
      gap: 20px;
      margin-top: 30px;
    }
    .nav-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--accent-primary);
      color: #fff;
      padding: 12px 20px;
      border-radius: 10px;
      text-decoration: none;
      transition: all .3s ease;
      font-weight: 500;
      flex: 1;
      max-width: 250px;
    }
    .nav-btn:hover {
      background: var(--accent-secondary);
      transform: translateY(-2px);
      box-shadow: 0 8px 20px var(--shadow-medium);
      color: #fff;
      text-decoration: none;
    }
    .nav-btn.prev {
      background: var(--text-secondary);
    }
    .nav-btn.prev:hover {
      background: #5a6c7d;
    }
    .nav-direction {
      font-size: .75em;
      opacity: .8;
    }
    .nav-title {
      font-size: .9em;
      font-weight: 600;
    }
    .nav-center {
      text-align: center;
      color: var(--text-secondary);
    }
    .code-container {
      position: relative;
      margin: 20px 0;
    }
    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: var(--code-bg);
      color: var(--code-text);
      padding: 10px 18px;
      border-radius: 10px 10px 0 0;
      border-bottom: 1px solid #333;
    }
    .code-label {
      font-size: .85em;
      color: #888;
    }
    .copy-btn {
      background: transparent;
      border: 1px solid #555;
      color: #888;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: .75em;
      transition: all .3s ease;
    }
    .copy-btn:hover {
      background: #333;
      color: #fff;
      border-color: #666;
    }
    .copy-btn.copied {
      background: #27ae60;
      color: #fff;
      border-color: #27ae60;
    }
    .code-block {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 18px;
      border-radius: 0 0 10px 10px;
      overflow-x: auto;
      font-family: 'Fira Code', 'Courier New', monospace;
      font-size: .85em;
      line-height: 1.4;
    }
    .code-block pre {
      margin: 0;
      white-space: pre-wrap;
    }
    .keyword { color: #ff79c6; }
    .string { color: #f1fa8c; }
    .comment { color: #6272a4; }
    .number { color: #bd93f9; }
    .function { color: #50fa7b; }
    .type { color: #8be9fd; }
    
    /* VSCode é¢¨æ ¼çš„ inline code æ¨£å¼ */
    code {
        background: #f4f4f4;
        color: var(--text-primary);
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'SFMono-Regular', 'Consolas', 'Liberation Mono', 'Menlo', monospace;
        font-size: 0.85em;
        font-weight: 500;
        border: 1px solid var(--border-color);
    }

    [data-theme="dark"] code {
        background: #2d3748;
        color: var(--text-primary);
        border: 1px solid var(--border-color);
    }
    
    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .sidebar {
        position: static;
        order: 2;
      }
      .main-area {
        order: 1;
      }
      .memory-diagram img {
        max-width: 90%;
      }
    }
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      .header {
        padding: 20px 15px;
      }
      .content-section {
        padding: 20px 15px;
      }
      .chapter-title {
        font-size: 1.5em;
      }
      .memory-diagram img {
        max-width: 100%;
        padding: 5px;
      }
    }
    html {
      scroll-behavior: smooth;
    }
    .content-section {
      scroll-margin-top: 80px;
    }
    :target .section-title {
      outline: 0;
      box-shadow: 0 0 0 4px rgba(52, 152, 219, .2) inset;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <div class="toc-widget">
        <div class="toc-header">
          <h3 class="toc-title">ğŸ“š èª²ç¨‹ç›®éŒ„</h3>
        </div>
        <div class="toc-body">
          <ul class="toc-list">
            <li class="toc-item">
              <a href="chapter1.html" class="toc-link">1. Introduction to pointers in C/C++</a>
            </li>
            <li class="toc-item">
              <a href="chapter2.html" class="toc-link">2. Work with Pointers</a>
            </li>
            <li class="toc-item">
              <a href="chapter3.html" class="toc-link">3. Pointer types, pointer arithmetic, void pointers</a>
            </li>
            <li class="toc-item">
              <a href="chapter4.html" class="toc-link">4. Pointers to Pointers</a>
            </li>
            <li class="toc-item">
              <a href="chapter5.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 5. Call by Reference
              </a>
              <ul class="sub-menu">
                <li><a href="chapter5.html#memory-blocks" class="toc-link">è¨˜æ†¶é«”å€å¡Š</a></li>
                <li><a href="chapter5.html#call-by-address" class="toc-link">å‚³å€å‘¼å«</a></li>
                <li><a href="chapter5.html#call-by-value" class="toc-link">å‚³å€¼å‘¼å«</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter6.html" class="toc-link">6. Pointers and Arrays</a>
            </li>
            <li class="toc-item">
              <a href="chapter7.html" class="toc-link">7. Array as function argument</a>
            </li>
            <li class="toc-item">
                <a href="chapter8.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                    <span class="arrow">â–¶</span> 8. Character arrays and pointers - part 1
                </a>
                <ul class="sub-menu">
                    <li><a href="chapter8.html#string-basics" class="toc-link">å­—ä¸²åŸºæœ¬æ¦‚å¿µ</a></li>
                    <li><a href="chapter8.html#string-pointers" class="toc-link">å­—ä¸²èˆ‡æŒ‡æ¨™</a></li>
                    <li><a href="chapter8.html#string-functions" class="toc-link">å­—ä¸²å‚³å…¥å‡½å¼</a></li>
                </ul>
            </li>
            <li class="toc-item">
              <a href="chapter9.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 9. Character arrays and pointers - part 2
              </a>
              <ul class="sub-menu">
                <li><a href="chapter9.html#memory-stack" class="toc-link">è¨˜æ†¶é«”èˆ‡Stackè§£æ</a></li>
                <li><a href="chapter9.html#readonly-memory" class="toc-link">å”¯è®€è¨˜æ†¶é«”</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter10.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 10. Pointers and 2-D arrays
              </a>
              <ul class="sub-menu">
                <li><a href="chapter10.html#2d-usage" class="toc-link">2D æŒ‡æ¨™é™£åˆ—çš„ä½¿ç”¨</a></li>
                <li><a href="chapter10.html#2d-access" class="toc-link">2ç¶­é™£åˆ—çš„å­˜å–ç­‰åƒ¹å¼</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter11.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 11. Pointers and multidimensional arrays
              </a>
              <ul class="sub-menu">
                <li><a href="chapter11.html#array-types" class="toc-link">é™£åˆ—å‚³å…¥å‡½å¼çš„å‹æ…‹è¦å‰‡</a></li>
                <li><a href="chapter11.html#3d-access" class="toc-link">ä¸‰ç¶­é™£åˆ—çš„å­˜å–ç­‰åƒ¹å¼</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter12.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 12. Pointers and dynamic memory - stack vs heap
              </a>
              <ul class="sub-menu">
                <li><a href="chapter12.html#memory-allocation" class="toc-link">C å‡½å¼åŸ·è¡Œèˆ‡è¨˜æ†¶é«”é…ç½®</a></li>
                <li><a href="chapter12.html#stack-overflow" class="toc-link">Stack Overflow æ˜¯ä»€éº¼ï¼Ÿ</a></li>
                <li><a href="chapter12.html#heap-usage" class="toc-link">Heap æ˜¯ä»€éº¼ï¼Ÿ</a></li>
                <li><a href="chapter12.html#malloc-diagram" class="toc-link">malloc çš„è¨˜æ†¶é«”é…ç½®å‹•æ…‹èˆ‡åœ–è§£</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter13.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 13. Dynamic memory allocation
              </a>
              <ul class="sub-menu">
                <li><a href="chapter13.html#malloc" class="toc-link">malloc</a></li>
                <li><a href="chapter13.html#calloc" class="toc-link">calloc</a></li>
                <li><a href="chapter13.html#realloc" class="toc-link">realloc</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter14.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 14. Pointers as Function Returns
              </a>
              <ul class="sub-menu">
                <li><a href="chapter14.html#malloc-free" class="toc-link">malloc èˆ‡ free å¾Œçš„æŒ‡æ¨™è¡Œç‚º</a></li>
                <li><a href="chapter14.html#safe-practices" class="toc-link">å®‰å…¨åšæ³•</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter15.html" class="toc-link has-submenu" onclick="toggleSubMenu(this)">
                <span class="arrow">â–¶</span> 15. Function Pointers
              </a>
              <ul class="sub-menu">
                <li><a href="chapter15.html#theory" class="toc-link">function pointer åŸç†è§£é‡‹</a></li>
                <li><a href="chapter15.html#practice" class="toc-link">function pointer å¯¦ä¾‹æ“ä½œ</a></li>
              </ul>
            </li>
            <li class="toc-item">
              <a href="chapter16.html" class="toc-link has-submenu active" onclick="toggleSubMenu(this)">
                <span class="arrow expanded">â–¶</span> 16. Function Pointers and Callbacks
              </a>
              <ul class="sub-menu show">
                <li><a href="#basic-example" class="toc-link">function pointer åŸºæœ¬ç¯„ä¾‹</a></li>
                <li><a href="#bubble-sort" class="toc-link">BubbleSort by Callback</a></li>
                <li><a href="#advanced-sort" class="toc-link">å»¶ä¼¸æ‡‰ç”¨ï¼šå¤šç¨®æ’åºé‚è¼¯</a></li>
                <li><a href="#quick-sort" class="toc-link">QuickSort by Callback</a></li>
              </ul>
            </li>
            <li class="toc-item"><a href="chapter17.html" class="toc-link">17. Memory Leak in C/C++</a></li>
            <li class="toc-item"><a href="chapter18.html" class="toc-link">18. æœ€çµ‚ç¸½çµ â€” C èªè¨€ Pointer æ€ç¶­åœ°åœ–</a></li>
          </ul>
        </div>
      </div>
    </aside>

    <div class="main-area">
      <header class="header">
        <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ›æ·±æ·ºè‰²æ¨¡å¼">
            <svg class="theme-icon" id="theme-icon" width="20" height="20" viewBox="0 0 24 24">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        </button>
        <div class="breadcrumb"><a href="../index.html">é¦–é </a> / <span>Chapter 16</span></div>
        <h1 class="chapter-title">16. Function Pointers and Callbacks</h1>
        <p class="chapter-subtitle">å‡½å¼æŒ‡æ¨™èˆ‡å›å‘¼å‡½å¼çš„æ‡‰ç”¨</p>
      </header>

      <main class="main-content">
        <section class="content-section" id="basic-example">
          <div class="section-header"><div class="section-number">ğŸ’»</div><h2 class="section-title">function pointer åŸºæœ¬ç¯„ä¾‹</h2></div>
          
          <div class="code-container">
            <div class="code-header"><span class="code-label">Callback ç¯„ä¾‹ç¨‹å¼ç¢¼</span><button class="copy-btn" onclick="copyCode(this,'code-full')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-full"><pre><span class="keyword">#include</span>&lt;stdio.h&gt;

<span class="type">void</span> <span class="function">A</span>(){ <span class="comment">// å›å‘¼å‡½å¼ (Callback Function)</span>
    <span class="function">printf</span>(<span class="string">"Hello\n"</span>);
}

<span class="type">void</span> <span class="function">B</span>(<span class="type">void</span> (*ptr)()){
    <span class="comment">// åƒæ•¸æ˜¯å‡½å¼æŒ‡æ¨™ï¼ŒæŒ‡å‘å›å‚³ voidã€ç„¡åƒæ•¸çš„å‡½å¼</span>
    ptr(); <span class="comment">// å‘¼å« ptr æ‰€æŒ‡å‘çš„å‡½å¼</span>
}

<span class="type">int</span> <span class="function">main</span>(){
    <span class="type">void</span> (*p)() = A; <span class="comment">// å®£å‘Šå‡½å¼æŒ‡æ¨™ pï¼ŒæŒ‡å‘ Aï¼ˆå„²å­˜çš„æ˜¯ A çš„ä½å€ï¼‰</span>
    B(p);  <span class="comment">// ç­‰åŒæ–¼ B(A)ï¼Œå› ç‚º p å’Œ A éƒ½æ˜¯å‡½å¼ä½å€</span>
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre></div>
          </div>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ“š é‡è¦è§€å¿µ</h3>
          <br>
          
          <h4><strong>Callback Function (å›å‘¼å‡½å¼)</strong></h4>
          <ul class="bullet-list">
            <li><strong>å®šç¾©ï¼š</strong>ä¸€å€‹å‡½å¼çš„æŒ‡æ¨™è¢«ç•¶ä½œåƒæ•¸å‚³çµ¦å¦ä¸€å€‹å‡½å¼ï¼Œä¸¦åœ¨è©²å‡½å¼ä¸­è¢«å‘¼å«ã€‚</li>
            <li><strong>åœ¨æ­¤ç¯„ä¾‹ä¸­ï¼š</strong>
              <ul class="nested-list">
                <li><code>A()</code> æ˜¯è¢«å‘¼å«çš„å‡½å¼ã€‚</li>
                <li>ç•¶ <code>A</code> çš„ä½å€è¢«å‚³çµ¦ <code>B</code> ä¸¦åœ¨ <code>B</code> å…§åŸ·è¡Œæ™‚ï¼Œ<code>A</code> æ‰æ‰®æ¼” callback functionã€‚</li>
              </ul>
            </li>
          </ul>

          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">
          <h4><strong>Function Pointer (å‡½å¼æŒ‡æ¨™)</strong></h4>
          <ul class="bullet-list">
            <li><strong>å®šç¾©ï¼š</strong>å„²å­˜å‡½å¼ä½å€çš„æŒ‡æ¨™ã€‚</li>
            <li><strong>èªæ³•ï¼š</strong></li>
          </ul>

          <div class="code-container">
            <div class="code-header"><span class="code-label">å‡½å¼æŒ‡æ¨™èªæ³•</span><button class="copy-btn" onclick="copyCode(this,'code-syntax')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-syntax"><pre>å›å‚³å‹æ…‹ (*æŒ‡æ¨™åç¨±)(åƒæ•¸å‹æ…‹åˆ—è¡¨)</pre></div>
          </div>

          <ul class="bullet-list">
            <li><strong>æ­¤ç¯„ä¾‹ï¼š</strong></li>
          </ul>

          <div class="code-container">
            <div class="code-header"><span class="code-label">ç¯„ä¾‹èªªæ˜</span><button class="copy-btn" onclick="copyCode(this,'code-example')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-example"><pre><span class="type">void</span> (*p)() = A;</pre></div>
          </div>

          <p class="content-text">è¡¨ç¤º <code>p</code> æ˜¯ä¸€å€‹æŒ‡å‘ã€Œå›å‚³ <code>void</code> ä¸”ç„¡åƒæ•¸ã€å‡½å¼çš„æŒ‡æ¨™ã€‚</p>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">
          <h3>ğŸ”„ B(p) ç­‰åŒæ–¼ B(A)</h3>
          <ul class="bullet-list">
            <li>åœ¨ C èªè¨€ä¸­ï¼Œå‡½å¼åï¼ˆå¦‚ Aï¼‰ä¸åŠ æ‹¬è™Ÿæ™‚æœƒè‡ªå‹•è½‰æ›æˆæŒ‡å‘è©²å‡½å¼çš„æŒ‡æ¨™ã€‚</li>
            <li>å› æ­¤ï¼š</li>
          </ul>

          <div class="code-container">
            <div class="code-header"><span class="code-label">ç­‰åƒ¹å¯«æ³•</span><button class="copy-btn" onclick="copyCode(this,'code-equiv')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-equiv"><pre>B(p);  <span class="comment">// ä½¿ç”¨å‡½å¼æŒ‡æ¨™å‘¼å«</span>
B(A);  <span class="comment">// ç›´æ¥å‚³éå‡½å¼åï¼Œæ•ˆæœç›¸åŒ</span></pre></div>
          </div>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ§  è¨˜æ†¶é«”çµæ§‹ç¤ºæ„åœ–</h3>
          <div class="code-container">
            <div class="code-header"><span class="code-label">è¨˜æ†¶é«”çµæ§‹ç¤ºæ„åœ–</span><button class="copy-btn" onclick="copyCode(this,'code-memory')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-memory"><pre>+---------------------+       +-------------------+
| main() Stack Frame  |       | ç¨‹å¼ç¢¼å€ (Text)   |
|---------------------|       |-------------------|
| p â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”    | A(): Hello\n ...  |
+---------------------+  â”‚    +-------------------+
                         â–¼
                [A çš„èµ·å§‹ä½å€]</pre></div>
          </div>

          <ul class="bullet-list">
            <li><code>p</code> å„²å­˜çš„æ˜¯ A å‡½å¼çš„èµ·å§‹ä½å€ï¼ˆç¬¬ä¸€æ¢æŒ‡ä»¤çš„ä½ç½®ï¼‰ã€‚</li>
            <li>åœ¨ B ä¸­ï¼Œ<code>ptr</code> ä¹Ÿæ˜¯ä¸€å€‹å‡½å¼æŒ‡æ¨™ï¼Œå‘¼å« <code>ptr()</code> å°±ç­‰æ–¼åŸ·è¡Œ <code>A()</code>ã€‚</li>
          </ul>
        </section>
        

        <section class="content-section" id="bubble-sort">
          <div class="section-header"><div class="section-number">ğŸ”„</div><h2 class="section-title">BubbleSort by Callback</h2></div>
          
          <h3>ğŸ“ ç¯„ä¾‹ç¨‹å¼ç¢¼</h3>
          <div class="code-container">
            <div class="code-header"><span class="code-label">BubbleSort with Callback</span><button class="copy-btn" onclick="copyCode(this,'code-bubble')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-bubble"><pre><span class="keyword">#include</span>&lt;stdio.h&gt;

<span class="type">int</span> <span class="function">compare</span>(<span class="type">int</span> first,<span class="type">int</span> second){
    <span class="keyword">if</span>(first&gt;second) <span class="keyword">return</span> <span class="number">1</span>;
    <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">-1</span>; <span class="comment">// ä¹Ÿå¯æ›´æ”¹å›å‚³å€¼é‚è¼¯ä¾†æ±ºå®šå‡åºæˆ–é™åº</span>
}

<span class="type">void</span> <span class="function">BubbleSort</span>(<span class="type">int</span> *A,<span class="type">int</span> size,<span class="type">int</span> (*compare)(<span class="type">int</span>,<span class="type">int</span>)){ <span class="comment">// åƒæ•¸æ¥æ”¶ callback function</span>
    <span class="type">int</span> i,j,temp;
    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;size<span class="number">-1</span>;i++){
        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;size<span class="number">-1</span>-j;j++){
            <span class="keyword">if</span>( (compare(A[j],A[j+<span class="number">1</span>]) &gt; <span class="number">0</span>) ){
                temp=A[j];
                A[j]=A[j+<span class="number">1</span>];
                A[j+<span class="number">1</span>]=temp;
            }
        }
    }
}

<span class="type">int</span> <span class="function">main</span>(){
    <span class="type">int</span> A[]={<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">4</span>};
    
    BubbleSort(A,<span class="number">6</span>,compare); <span class="comment">// å‚³å…¥å‡½å¼æŒ‡æ¨™ (callback function)</span>
    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++) <span class="function">printf</span>(<span class="string">"%d "</span>,A[i]);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre></div>
          </div>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">
          <h3>ğŸ” Callback Function æ˜¯ä»€éº¼ï¼Ÿ</h3>
          <ul class="bullet-list">
            <li><strong>å®šç¾©ï¼š</strong>å°‡ä¸€å€‹å‡½å¼çš„ä½å€ï¼ˆå‡½å¼æŒ‡æ¨™ï¼‰ä½œç‚ºåƒæ•¸å‚³çµ¦å¦ä¸€å€‹å‡½å¼ï¼Œä¸¦ç”±è©²å‡½å¼åœ¨é©ç•¶æ™‚æ©Ÿå‘¼å«å®ƒã€‚</li>
            <li><strong>åœ¨æœ¬ä¾‹ä¸­ï¼š</strong>
              <ul class="nested-list">
                <li><code>compare</code> æ˜¯è¢«å‚³å…¥ <code>BubbleSort</code> çš„ <strong>callback function</strong>ã€‚</li>
                <li><code>BubbleSort</code> é€é <code>compare(A[j], A[j+1])</code> å‘¼å«é€™å€‹å¤–éƒ¨æä¾›å‡½å¼ä¾†åˆ¤æ–·æ’åºé †åºã€‚</li>
              </ul>
            </li>
          </ul>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>â“ ç‚ºä»€éº¼ä¸ç›´æ¥åœ¨ BubbleSort å…§å‘¼å« compare()ï¼Ÿ</h3>
          <br>
        
          <h4>ğŸ”´ ç›´æ¥å‘¼å«ç‰ˆæœ¬</h4>
          <div class="code-container">
            <div class="code-header"><span class="code-label">ç›´æ¥å‘¼å«ç‰ˆæœ¬</span><button class="copy-btn" onclick="copyCode(this,'code-direct')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-direct"><pre><span class="type">void</span> <span class="function">BubbleSort</span>(<span class="type">int</span> *A,<span class="type">int</span> size) {
    <span class="keyword">for</span> (...) {
        <span class="keyword">if</span> (compare(A[j], A[j+<span class="number">1</span>]) &gt; <span class="number">0</span>) {
            <span class="comment">// Swap</span>
        }
    }
}</pre></div>
          </div>

          <div class="success-box">
            <div class="success-title">âœ… å¯è¡Œï¼Œä½†ï¼š</div>
            <ul class="bullet-list" style="color: var(--text-primary);">
              <li>ç¶æ­»åªèƒ½ä½¿ç”¨é€™å€‹ <code>compare</code>ã€‚</li>
              <li>è¦æ”¹æˆé™åºæ’åºå¿…é ˆä¿®æ”¹ <code>BubbleSort</code> å…§éƒ¨ç¨‹å¼ç¢¼ä¸¦é‡æ–°ç·¨è­¯ã€‚</li>
              <li>ç„¡æ³•åœ¨åŒä¸€æ¬¡åŸ·è¡Œä¸­é¸æ“‡ä¸åŒæ’åºè¦å‰‡ã€‚</li>
            </ul>
          </div>

          <h4>ğŸŸ¢ callback ç‰ˆæœ¬</h4>
          <div class="code-container">
            <div class="code-header"><span class="code-label">Callback ç‰ˆæœ¬</span><button class="copy-btn" onclick="copyCode(this,'code-callback')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-callback"><pre><span class="type">void</span> <span class="function">BubbleSort</span>(<span class="type">int</span> *A,<span class="type">int</span> size,<span class="type">int</span> (*compare)(<span class="type">int</span>,<span class="type">int</span>)) { ... }</pre></div>
          </div>

          <div class="success-box">
            <div class="success-title">âœ… å¥½è™•ï¼š</div>
            <ul class="bullet-list" style="color: var(--text-primary);">
              <li><strong>è§£è€¦ï¼š</strong>æ’åºæ¼”ç®—æ³•èˆ‡æ¯”è¼ƒé‚è¼¯åˆ†é›¢ã€‚</li>
              <li><strong>å¯é‡ç”¨ï¼š</strong>åŒä¸€ä»½æ’åºç¨‹å¼ç¢¼å¯ä»¥æ”¯æ´å¤šç¨®æ’åºè¦å‰‡ã€‚</li>
              <li><strong>éˆæ´»æ€§ï¼š</strong>å¯ä»¥åœ¨ runtime ä¾æƒ…æ³æ±ºå®šæ¯”è¼ƒé‚è¼¯ï¼ˆå‡æš®ã€é™æš®ã€è‡ªè¨‚è¦å‰‡ï¼‰ã€‚</li>
            </ul>
          </div>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ’¡ èªæ³•é‡é»</h3>
          <br>

          <h4>1. å‡½å¼æŒ‡æ¨™çš„å®£å‘Š</h4>
          <div class="code-container">
            <div class="code-header"><span class="code-label">å‡½å¼æŒ‡æ¨™å®£å‘Š</span><button class="copy-btn" onclick="copyCode(this,'code-declare')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-declare"><pre><span class="type">int</span> (*compare)(<span class="type">int</span>,<span class="type">int</span>)</pre></div>
          </div>

          <ul class="bullet-list">
            <li>å¤–å±¤æ‹¬è™Ÿä¸å¯çœç•¥ï¼Œå¦å‰‡æœƒè®Šæˆ <code>int *compare(int,int)</code>ï¼ˆä»£è¡¨å›å‚³ <code>int*</code> çš„å‡½å¼ï¼‰ã€‚</li>
            <li>å‡½å¼æ ¼å¼å¿…é ˆèˆ‡å¯¦éš›å‚³å…¥çš„å‡½å¼å®Œå…¨ä¸€è‡´ã€‚</li>
          </ul>

          <h4>2. å‡½å¼åæœƒè‡ªå‹•åŒ–ç‚ºæŒ‡æ¨™</h4>
          <ul class="bullet-list">
            <li>åœ¨ <code>main</code> ä¸­ <code>compare</code>ï¼ˆä¸åŠ  <code>()</code>ï¼‰æœƒè‡ªå‹•è½‰æˆæŒ‡å‘è©²å‡½å¼çš„ä½å€ã€‚</li>
            <li>æ‰€ä»¥ <code>BubbleSort(A, 6, compare)</code> èˆ‡ <code>BubbleSort(A, 6, &compare)</code> ç­‰åƒ¹ã€‚</li>
          </ul>

          <h4>3. å‘¼å«å‡½å¼æŒ‡æ¨™</h4>
          <ul class="bullet-list">
            <li>å¯ç”¨ <code>compare(x, y)</code> æˆ– <code>(*compare)(x, y)</code>ï¼Œå…©è€…ç­‰åƒ¹ã€‚</li>
          </ul>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸš€ å»¶ä¼¸æ‡‰ç”¨ï¼šå¤šç¨®æ’åºé‚è¼¯</h3>
          <p class="content-text">ä¸Šé¢ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘åªç”¨ä¸€å€‹ <code>compare</code> å‡½å¼å¯¦ç¾å–®ä¸€çš„æ¯”è¼ƒè¦å‰‡ï¼ˆå‡æš®ï¼‰ã€‚
ä½†å¦‚æœéœ€æ±‚å¢åŠ ï¼Œä¾‹å¦‚è¦æ”¯æ´ å‡æš® / é™æš®ã€æ­£å¸¸å€¼ / çµ•å°å€¼ å››ç¨®ä¸åŒæ¨¡å¼ï¼Œ
å°±å¯ä»¥å®šç¾©å¤šå€‹æ¯”è¼ƒå‡½å¼ï¼Œä¸¦åœ¨ <code>main</code> ä¸­æ ¹æ“šä½¿ç”¨è€…é¸æ“‡å‚³å…¥å°æ‡‰çš„å‡½å¼æŒ‡æ¨™ã€‚</p>

          <p class="content-text">é€™æ¨£å¯ä»¥ï¼š</p>
          <ul class="bullet-list">
            <li>ä¿æŒ <code>BubbleSort</code> æ ¸å¿ƒç¨‹å¼ç¢¼ä¸è®Š</li>
            <li>åœ¨åŸ·è¡Œæ™‚è‡ªç”±åˆ‡æ›æ’åºé‚è¼¯</li>
            <li>è®“æ’åºå‡½å¼æ›´åŠ é€šç”¨åŒ–ï¼Œç”šè‡³å¯ä»¥æ“´å±•åˆ°å…¶ä»–å‹æ…‹ï¼ˆå¦‚å­—ä¸²ã€çµæ§‹ï¼‰</li>
          </ul>

          <p class="content-text">æ¥ä¸‹ä¾†çš„ç¯„ä¾‹å°‡ç¤ºç¯„å¦‚ä½•å° æ­£å¸¸/çµ•å°å€¼ èˆ‡ å‡æš®/é™æš® çµåˆï¼Œè®“ä½¿ç”¨è€…ä¸€æ¬¡å¯é¸æ“‡å››ç¨®æ’åºæ–¹å¼ã€‚</p>

          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ—ï¸ å®Œæ•´ç¯„ä¾‹ï¼šå››ç¨®æ’åºæ¨¡å¼</h3>
          <div class="code-container">
            <div class="code-header"><span class="code-label">å¤šç¨®æ’åºåŠŸèƒ½å®Œæ•´ç¨‹å¼</span><button class="copy-btn" onclick="copyCode(this,'code-multi')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-multi"><pre><span class="keyword">#include</span> &lt;stdio.h&gt;
<span class="keyword">#include</span> &lt;math.h&gt;

<span class="type">int</span> <span class="function">compare_normal_asc</span>(<span class="type">int</span> a, <span class="type">int</span> b) {
    <span class="keyword">return</span> a - b; <span class="comment">// æ­£å¸¸å€¼å‡åº</span>
}

<span class="type">int</span> <span class="function">compare_normal_desc</span>(<span class="type">int</span> a, <span class="type">int</span> b) {
    <span class="keyword">return</span> b - a; <span class="comment">// æ­£å¸¸å€¼é™åº</span>
}

<span class="type">int</span> <span class="function">compare_abs_asc</span>(<span class="type">int</span> a, <span class="type">int</span> b) {
    <span class="keyword">return</span> <span class="function">abs</span>(a) - <span class="function">abs</span>(b); <span class="comment">// çµ•å°å€¼å‡åº</span>
}

<span class="type">int</span> <span class="function">compare_abs_desc</span>(<span class="type">int</span> a, <span class="type">int</span> b) {
    <span class="keyword">return</span> <span class="function">abs</span>(b) - <span class="function">abs</span>(a); <span class="comment">// çµ•å°å€¼é™åº</span>
}

<span class="type">void</span> <span class="function">BubbleSort</span>(<span class="type">int</span> *A, <span class="type">int</span> size, <span class="type">int</span> (*compare)(<span class="type">int</span>, <span class="type">int</span>)) {
    <span class="type">int</span> i, j, temp;
    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size - <span class="number">1</span>; i++) {
        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; size - <span class="number">1</span> - i; j++) {
            <span class="keyword">if</span> (compare(A[j], A[j + <span class="number">1</span>]) &gt; <span class="number">0</span>) {
                temp = A[j];
                A[j] = A[j + <span class="number">1</span>];
                A[j + <span class="number">1</span>] = temp;
            }
        }
    }
}

<span class="type">int</span> <span class="function">main</span>() {
    <span class="type">int</span> A[] = {-<span class="number">31</span>, <span class="number">22</span>, -<span class="number">1</span>, <span class="number">50</span>, -<span class="number">6</span>, <span class="number">4</span>};
    <span class="type">int</span> n = <span class="function">sizeof</span>(A) / <span class="function">sizeof</span>(A[<span class="number">0</span>]);
    <span class="type">int</span> choice;
    
    <span class="function">printf</span>(<span class="string">"é¸æ“‡æ’åºæ–¹å¼:\n"</span>);
    <span class="function">printf</span>(<span class="string">"1: æ­£å¸¸å€¼å‡åº\n"</span>);
    <span class="function">printf</span>(<span class="string">"2: æ­£å¸¸å€¼é™åº\n"</span>);
    <span class="function">printf</span>(<span class="string">"3: çµ•å°å€¼å‡åº\n"</span>);
    <span class="function">printf</span>(<span class="string">"4: çµ•å°å€¼é™åº\n"</span>);
    <span class="function">printf</span>(<span class="string">"è¼¸å…¥é¸é … (1-4): "</span>);
    <span class="function">scanf</span>(<span class="string">"%d"</span>, &amp;choice);
    
    <span class="keyword">switch</span> (choice) {
        <span class="keyword">case</span> <span class="number">1</span>:
            BubbleSort(A, n, compare_normal_asc);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="number">2</span>:
            BubbleSort(A, n, compare_normal_desc);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="number">3</span>:
            BubbleSort(A, n, compare_abs_asc);
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="number">4</span>:
            BubbleSort(A, n, compare_abs_desc);
            <span class="keyword">break</span>;
        <span class="keyword">default</span>:
            <span class="function">printf</span>(<span class="string">"é¸é …éŒ¯èª¤\n"</span>);
            <span class="keyword">return</span> <span class="number">1</span>;
    }
    
    <span class="function">printf</span>(<span class="string">"æ’åºçµæœ: "</span>);
    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) {
        <span class="function">printf</span>(<span class="string">"%d "</span>, A[i]);
    }
    <span class="function">printf</span>(<span class="string">"\n"</span>);
    
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre></div>
          </div>

          <h4>ç¨‹å¼èªªæ˜</h4>
          <ul class="bullet-list">
            <li><strong>å¤šå€‹æ¯”è¼ƒå‡½å¼ï¼š</strong>
              <ul class="nested-list">
                <li>æ¯å€‹å‡½å¼éƒ½éµå¾ªç›¸åŒå‡½å¼æ ¼å¼ <code>int (int, int)</code>ï¼Œæ–¹ä¾¿å‚³çµ¦ <code>BubbleSort</code>ã€‚</li>
                <li>æ­£å¸¸å€¼ / çµ•å°å€¼ + å‡åº / é™åº å½¢æˆå››ç¨®çµ„åˆã€‚</li>
              </ul>
            </li>
            <li><strong>å‡½å¼æŒ‡æ¨™é¸æ“‡ï¼š</strong>
              <ul class="nested-list">
                <li>ä½¿ç”¨ <code>switch</code> ä¾ä½¿ç”¨è€…è¼¸å…¥ï¼Œé¸æ“‡å°æ‡‰çš„æ¯”è¼ƒå‡½å¼å‚³çµ¦ <code>BubbleSort</code>ã€‚</li>
              </ul>
            </li>
            <li><strong>æ’åºæ ¸å¿ƒä¸è®Šï¼š</strong>
              <ul class="nested-list">
                <li><code>BubbleSort</code> ä¸éœ€çŸ¥é“æ˜¯ä»€éº¼æ’åºè¦å‰‡ï¼Œé€é callback å‹•æ…‹å‘¼å«æ¯”è¼ƒé‚è¼¯ã€‚</li>
              </ul>
            </li>
          </ul>

          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ’¯ å»¶ä¼¸è¨è«–ï¼šç‚ºä»€éº¼ä¸ç”¨ if ç®—å¼ï¼Ÿ</h3>
          <p class="content-text">å¦‚æœç”¨ <code>if</code> æˆ–ç›´æ¥åœ¨ <code>BubbleSort</code> è£¡å¯« <code>A[j] > A[j+1]</code>ï¼Œ</p>
          <ul class="bullet-list">
            <li>åªèƒ½æ”¯æ´å›ºå®šçš„æ¯”è¼ƒæ–¹å¼</li>
            <li>è¦å¢åŠ æ’åºæ¨¡å¼å¿…é ˆä¿®æ”¹ <code>BubbleSort</code> æœ¬èº«ï¼Œé•åã€Œæ¨¡çµ„åŒ–è¨­è¨ˆã€åŸå‰‡</li>
            <li>ç„¡æ³•åœ¨åŸ·è¡Œæ™‚æ±ºå®šæ’åºè¦å‰‡</li>
          </ul>

          <p class="content-text"><strong>é€é Callback Functionï¼š</strong></p>
          <ul class="bullet-list">
            <li>ä¸å¿…æ”¹æ’åºå‡½å¼ï¼Œæ–°å¢æ¯”è¼ƒæ¨¡å¼åªéœ€å¯«æ–°å‡½å¼</li>
            <li>å¯ä»¥åœ¨ runtime é¸æ“‡æ’åºæ–¹å¼</li>
            <li>è®“æ¼”ç®—æ³•èˆ‡æ¯”è¼ƒé‚è¼¯è§£è€¦ï¼Œå¢åŠ å¯é‡ç”¨æ€§èˆ‡å¯ç¶­è­·æ€§</li>
          </ul>
        </section>

        <section class="content-section" id="quick-sort">
          <div class="section-header"><div class="section-number">âš¡</div><h2 class="section-title">QuickSort by Callback</h2></div>
          
          <div class="code-container">
            <div class="code-header"><span class="code-label">QuickSort with qsort() ç¯„ä¾‹</span><button class="copy-btn" onclick="copyCode(this,'code-qsort')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-qsort"><pre><span class="keyword">#include</span>&lt;stdio.h&gt;   <span class="comment">// printf() ç”¨</span>
<span class="keyword">#include</span>&lt;math.h&gt;    <span class="comment">// abs() ç­‰æ•¸å­¸å‡½å¼ï¼ˆé€™è£¡å…¶å¯¦æ²’ç”¨åˆ°ï¼‰</span>
<span class="keyword">#include</span>&lt;stdlib.h&gt;  <span class="comment">// qsort() ç”¨</span>

<span class="comment">// æ¯”è¼ƒå‡½å¼ï¼Œä¾› qsort å‘¼å«</span>
<span class="comment">// åƒæ•¸ a, b æ˜¯ã€Œé™£åˆ—å…ƒç´ çš„ä½å€ã€ï¼Œå‹æ…‹æ˜¯ const void*ï¼ˆæ³›å‹æŒ‡æ¨™ï¼‰</span>
<span class="comment">// qsort ä¸çŸ¥é“å…ƒç´ å‹æ…‹ï¼Œæ‰€ä»¥ç”¨ void*ï¼Œæˆ‘å€‘å¿…é ˆè‡ªè¡Œè½‰å‹</span>
<span class="type">int</span> <span class="function">compare</span>(<span class="type">const void</span>* a, <span class="type">const void</span>* b){
    <span class="comment">// 1. å…ˆæŠŠæ³›å‹æŒ‡æ¨™è½‰æˆ int*ï¼Œè¡¨ç¤ºå®ƒå¯¦éš›ä¸ŠæŒ‡å‘æ•´æ•¸</span>
    <span class="comment">// 2. å†ç”¨ * å–å‡ºè©²ä½å€ä¸Šçš„æ•´æ•¸å€¼</span>
    <span class="type">int</span> A = *((<span class="type">int</span>*)a);
    <span class="type">int</span> B = *((<span class="type">int</span>*)b);
    
    <span class="comment">// å›å‚³ A - B</span>
    <span class="comment">// qsort è¦å‰‡ï¼š</span>
    <span class="comment">// >0 â†’ A æ‡‰æ’åœ¨ B å¾Œé¢</span>
    <span class="comment">// <0 â†’ A æ‡‰æ’åœ¨ B å‰é¢</span>
    <span class="comment">// =0 â†’ A èˆ‡ B è¦–ç‚ºç›¸ç­‰</span>
    <span class="keyword">return</span> A - B; <span class="comment">// é€™è£¡ä»£è¡¨å‡å†ªæ’åº</span>
}

<span class="type">int</span> <span class="function">main</span>(){
    <span class="comment">// åŸå§‹é™£åˆ—</span>
    <span class="type">int</span> A[] = {-<span class="number">31</span>, <span class="number">22</span>, -<span class="number">1</span>, <span class="number">50</span>, -<span class="number">6</span>, <span class="number">4</span>};
    
    <span class="comment">// å‘¼å« qsort é€²è¡Œæ’åº</span>
    <span class="comment">// qsort(</span>
    <span class="comment">//   é™£åˆ—èµ·å§‹ä½å€,</span>
    <span class="comment">//   é™£åˆ—å…ƒç´ æ•¸é‡,</span>
    <span class="comment">//   å–®ä¸€å…ƒç´ å¤§å°ï¼ˆä½å…ƒçµ„æ•¸ï¼‰,</span>
    <span class="comment">//   æ¯”è¼ƒå‡½å¼æŒ‡æ¨™</span>
    <span class="comment">// )</span>
    <span class="function">qsort</span>(A, <span class="number">6</span>, <span class="function">sizeof</span>(<span class="type">int</span>), compare);
    
    <span class="comment">// è¼¸å‡ºæ’åºå¾Œçš„é™£åˆ—</span>
    <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)
        <span class="function">printf</span>(<span class="string">"%d "</span>, A[i]);
        
    <span class="comment">// è¼¸å‡ºçµæœ: -31 -6 -1 4 22 50</span>
    <span class="keyword">return</span> <span class="number">0</span>;
}</pre></div>
          </div>

          <h3>ğŸ’¡ é€™æ®µç¨‹å¼çš„ç›®çš„æ˜¯ä»€éº¼ï¼Ÿ</h3>
          <p class="content-text">å®ƒçš„åŠŸèƒ½æ˜¯ ç”¨ C æ¨™æº–å‡½å¼åº«çš„ <code>qsort()</code> ä¾†æ’åºä¸€å€‹æ•´æ•¸é™£åˆ— åœ¨é€™è£¡ï¼Œé™£åˆ—æ˜¯ï¼š</p>
          
          <div class="code-container">
            <div class="code-header"><span class="code-label">åŸå§‹è³‡æ–™</span><button class="copy-btn" onclick="copyCode(this,'code-data')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-data"><pre>{-31, 22, -1, 50, -6, 4}</pre></div>
          </div>

          <p class="content-text">æ’åºå¾Œæœƒè®Šæˆï¼š</p>
          
          <div class="code-container">
            <div class="code-header"><span class="code-label">æ’åºçµæœ</span><button class="copy-btn" onclick="copyCode(this,'code-result')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-result"><pre>-31 -6 -1 4 22 50</pre></div>
          </div>

          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ’¡ qsort æ˜¯ä»€éº¼ï¼Ÿ</h3>
          <ul class="bullet-list">
            <li><strong>å®šç¾©ï¼š</strong><code>qsort</code>ï¼ˆQuick Sortï¼‰æ˜¯ C æ¨™æº–å‡½å¼åº« <code>&lt;stdlib.h&gt;</code> æä¾›çš„æ³›å‹æ’åºå‡½å¼ã€‚</li>
            <li><strong>å¥½è™•ï¼š</strong>å¯ä»¥æ’åºä»»ä½•é¡å‹çš„è³‡æ–™ï¼ˆæ•´æ•¸ã€æµ®é»æ•¸ã€å­—ä¸²ã€çµæ§‹ï¼‰ï¼Œä¸éœ€è¦è‡ªå·±å¯«æ’åºæ¼”ç®—æ³•ã€‚</li>
            <li><strong>å‡½å¼åŸå‹ï¼š</strong></li>
          </ul>

          <div class="code-container">
            <div class="code-header"><span class="code-label">qsort å‡½å¼åŸå‹</span><button class="copy-btn" onclick="copyCode(this,'code-qsort-prototype')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-qsort-prototype"><pre><span class="type">void</span> <span class="function">qsort</span>(
    <span class="type">void</span> *base,        <span class="comment">// è¦æ’åºçš„é™£åˆ—èµ·å§‹ä½å€</span>
    <span class="type">size_t</span> nitems,    <span class="comment">// é™£åˆ—å…ƒç´ æ•¸é‡</span>
    <span class="type">size_t</span> size,      <span class="comment">// æ¯å€‹å…ƒç´ å¤§å°ï¼ˆä½å…ƒçµ„ï¼‰</span>
    <span class="type">int</span> (*compare)(<span class="type">const void</span> *, <span class="type">const void</span> *) <span class="comment">// æ¯”è¼ƒå‡½å¼</span>
);</pre></div>
          </div>

          <h3>ğŸ” ç›¸é—œåƒè€ƒè³‡æº</h3>
          <ul class="bullet-list">
            <li>
                <a href="https://learn.microsoft.com/zh-tw/cpp/c-runtime-library/reference/qsort?view=msvc-170" target="_blank">
                Microsoft Docs - qsort å‡½å¼èªªæ˜
                </a>
            </li>
            <li>
                <a href="https://hackmd.io/@hank20010209/S1mOTzbys/%2Fe8GFgX6nSIetgJcTZy_jrQ" target="_blank">
                HackMD - C èªè¨€ qsort ç­†è¨˜
                </a>
            </li>
            <li>
                <a href="https://www.tutorialspoint.com/c_standard_library/c_function_qsort.htm" target="_blank">
                TutorialsPoint - C qsort å‡½å¼
                </a>
            </li>
        </ul>


          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ” compare å‡½å¼</h3>
          <div class="code-container">
            <div class="code-header"><span class="code-label">compare å‡½å¼è©³è§£</span><button class="copy-btn" onclick="copyCode(this,'code-compare')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-compare"><pre><span class="type">int</span> <span class="function">compare</span>(<span class="type">const void</span>* a, <span class="type">const void</span>* b){
    <span class="type">int</span> A = *((<span class="type">int</span>*)a); <span class="comment">// æŠŠ void* è½‰æˆ int* å†å–å€¼</span>
    <span class="type">int</span> B = *((<span class="type">int</span>*)b);
    
    <span class="keyword">return</span> A - B; <span class="comment">// å‡åºæ’åºï¼šA > B å›å‚³ > A < B å›å‚³è² æ•¸</span>
}</pre></div>
          </div>

          <ul class="bullet-list">
            <li>å› ç‚º <code>qsort</code> æ˜¯æ³›å‹ï¼Œä¸çŸ¥é“ä½ è¦æ’åˆ—çš„å…ƒç´ å‹æ…‹ï¼Œæ‰€ä»¥æœƒæŠŠå…ƒç´ æŒ‡æ¨™ç•¶æˆ <code>const void*</code>ï¼ˆæ³›å‹æŒ‡æ¨™ï¼‰ã€‚</li>
            <li>å› ç‚ºå®ƒä¸çŸ¥é“ä½ æ’åˆ—çš„å…ƒç´ å‹æ…‹ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨ã€Œæ³›å‹æŒ‡æ¨™ã€<code>void*</code> ä¾†æ¥æ”¶å…ƒç´ åœ°å€ã€‚</li>
            <li><code>const</code> æ˜¯ä¿è­·ä½œç”¨ï¼Œè¡¨ç¤º <code>qsort</code> åœ¨æ¯”è¼ƒæ™‚ä¸æœƒä¿®æ”¹å…ƒç´ å…§å®¹ã€‚</li>
          </ul>

          <div class="success-box">
            <div class="success-title">ğŸ’¡ é‡é»ï¼š</div>
            <ul class="bullet-list" style="color: var(--text-primary);">
              <li><code>const void*</code> åªæ˜¯ä¸€å€‹ã€Œä¸çŸ¥é“æ˜¯ä»€éº¼é¢æ˜¯ä»€éº¼å‹æ…‹çš„åœ°å€ã€ã€‚</li>
              <li>è¦ç”¨å®ƒï¼Œå¿…é ˆè‡ªå·±è½‰å›æ­£ç¢ºå‹æ…‹ã€‚</li>
              <li>åœ¨æ¯”è¼ƒå‡½å¼è£¡ï¼Œæˆ‘å€‘å¿…é ˆè‡ªå·±æŠŠå®ƒè½‰å›æ­£ç¢ºå‹æ…‹ï¼ˆé€™è£¡æ˜¯ <code>int*</code> ï¼‰ã€‚</li>
            </ul>
          </div>
          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <h3>ğŸ“ åœ–è§£ç´€éŒ„</h3>
          <p class="content-text"><strong>å‡è¨­ç¬¬ä¸€æ¬¡å‘¼å«ï¼š</strong></p>

          <div class="code-container">
            <div class="code-header"><span class="code-label">ç¬¬ä¸€æ¬¡å‘¼å«ç¯„ä¾‹</span><button class="copy-btn" onclick="copyCode(this,'code-first-call')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-first-call"><pre>a â†’ &A[0]    ï¼ˆä½å€ï¼‰
b â†’ &A[1]    ï¼ˆä½å€ï¼‰

(int*)a â†’ æŠŠæ³›å‹æŒ‡æ¨™è½‰æˆ int æŒ‡æ¨™
*((int*)a) â†’ å–å‡ºè©²ä½å€çš„æ•´æ•¸å€¼</pre></div>
          </div>

          <h3>ğŸ” main() çš„æµç¨‹</h3>
          <div class="code-container">
            <div class="code-header"><span class="code-label">main() æµç¨‹èªªæ˜</span><button class="copy-btn" onclick="copyCode(this,'code-main-flow')">ğŸ“‹ è¤‡è£½</button></div>
            <div class="code-block" id="code-main-flow"><pre><span class="type">int</span> A[]=<span class="string">{-31,22,-1,50,-6,4}</span>;

<span class="comment">// ç”¨ qsort æ’åº</span>
<span class="function">qsort</span>(
    A,                  <span class="comment">// é™£åˆ—èµ·å§‹ä½å€</span>
    <span class="number">6</span>,                  <span class="comment">// é™£åˆ—é•·åº¦</span>
    <span class="function">sizeof</span>(<span class="type">int</span>),       <span class="comment">// æ¯å€‹å…ƒç´ çš„å¤§å°</span>
    compare             <span class="comment">// æ¯”è¼ƒå‡½å¼</span>
);

<span class="comment">// å°å‡ºçµæœ</span>
<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)
    <span class="function">printf</span>(<span class="string">"%d "</span>,A[i]);</pre></div>
          </div>

          <ul class="bullet-list">
            <li><code>qsort</code> æœƒæ ¹æ“š <code>compare</code> å‡½å¼çš„é‚è¼¯é€²è¡Œæ’åº</li>
            <li>åŸ·è¡Œå¾Œé™£åˆ— A å·²ç¶“è¢«æ’åºå¥½</li>
            <li>æœ€å¾Œç”¨è¿´åœˆè¼¸å‡ºæ’åºå¾Œçš„çµæœ</li>
          </ul>

          <hr style="border: none; border-top: 2px solid var(--border-color); margin: 30px 0;">

          <div class="success-box">
            <div class="success-title">âœ… é‡é»ï¼š</div>
            <ul class="bullet-list" style="color: var(--text-primary);">
              <li><code>qsort</code> æ˜¯ C èªè¨€å…§å»ºçš„æ³›å‹æ’åºå·¥å…·</li>
              <li>ä½ è¦è‡ªå·±å¯«æ¯”è¼ƒå‡½å¼ï¼Œå‘Šè¨´ <code>qsort</code> ä»€éº¼é †åºç®—ã€Œå¤§æ–¼ï¼å°æ–¼ã€</li>
              <li>æ¯”è¼ƒå‡½å¼å¿…é ˆç”¨ <code>const void*</code> ç•¶åƒæ•¸ï¼Œä¸¦åœ¨è£¡é¢è½‰å‹</li>
            </ul>
          </div>
        </section>

      </main>

      <nav class="navigation">
        <a href="chapter15.html" class="nav-btn prev">
          <div>
            <div class="nav-direction">â† ä¸Šä¸€é </div>
            <div class="nav-title">Function Pointers</div>
          </div>
        </a>
        <div class="nav-center">
          <div style="font-weight:600;">Chapter 16 / 18</div>
          <div style="font-size:.9em;">Function Pointers and Callbacks</div>
        </div>
        <a href="chapter17.html" class="nav-btn">
          <div>
            <div class="nav-direction">ä¸‹ä¸€é  â†’</div>
            <div class="nav-title">Memory Leak in C/C++</div>
          </div>
        </a>
      </nav>
    </div>
  </div>

  <script>
    function toggleTheme() {
        const body = document.body;
        const icon = document.getElementById('theme-icon');
        const current = body.getAttribute('data-theme');
        if (current === 'dark') {
            body.setAttribute('data-theme', 'light');
            icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
            localStorage.setItem('theme', 'light');
        } else {
            body.setAttribute('data-theme', 'dark');
            icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>';
            localStorage.setItem('theme', 'dark');
        }
    }
    function loadTheme() {
        const saved = localStorage.getItem('theme') || 'light';
        const icon = document.getElementById('theme-icon');
        document.body.setAttribute('data-theme', saved);
        if (saved === 'dark') {
            icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>';
        } else {
            icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
        }
    }
    function toggleSubMenu(el) {
        event.preventDefault();
        const arrow = el.querySelector('.arrow');
        const sub = el.parentElement.querySelector('.sub-menu');
        if (sub) {
            arrow.classList.toggle('expanded');
            sub.classList.toggle('show');
        }
    }
    function copyCode(btn, id) {
        const code = document.getElementById(id).querySelector('pre').textContent;
        navigator.clipboard.writeText(code).then(() => {
            const text = btn.textContent;
            btn.textContent = 'âœ… å·²è¤‡è£½';
            btn.classList.add('copied');
            setTimeout(() => {
                btn.textContent = text;
                btn.classList.remove('copied');
            }, 2000);
        }).catch(() => {
            const ta = document.createElement('textarea');
            ta.value = code;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            document.body.removeChild(ta);
            const text = btn.textContent;
            btn.textContent = 'âœ… å·²è¤‡è£½';
            btn.classList.add('copied');
            setTimeout(() => {
                btn.textContent = text;
                btn.classList.remove('copied');
            }, 2000);
        });
    }
    document.addEventListener('DOMContentLoaded', () => loadTheme());
  </script>
</body>
</html>