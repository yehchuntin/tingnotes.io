<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12. Pointers and Dynamic Memory - Stack vs Heap | C Pointer Tutorial</title>
    <meta name="description" content="æ·±å…¥æ¢è¨Cèªè¨€çš„å‹•æ…‹è¨˜æ†¶é«”é…ç½®ï¼Œç†è§£Stackèˆ‡Heapçš„å·®ç•°ï¼Œå­¸ç¿’mallocçš„ä½¿ç”¨æ–¹å¼ä»¥åŠStack Overflowçš„æˆå› èˆ‡é é˜²ã€‚">
    
    <link rel="stylesheet" href="/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Fira+Code&display=swap" rel="stylesheet">
    
    <style>
        /* ========== Fade-in å‹•ç•« ========== */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        /* ========== CSS è®Šæ•¸å®šç¾©ï¼ˆå¦‚æœ /style.css è¼‰å…¥å¤±æ•—çš„å‚™ç”¨ï¼‰ ========== */
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-card: #ffffff;
            --text-primary: #2c3e50;
            --text-secondary: #6c757d;
            --text-muted: #adb5bd;
            --accent-primary: #3498db;
            --accent-secondary: #2980b9;
            --border-color: #e9ecef;
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.15);
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d3748;
            --bg-card: #2d3748;
            --text-primary: #f7fafc;
            --text-secondary: #a0aec0;
            --text-muted: #718096;
            --accent-primary: #4299e1;
            --accent-secondary: #3182ce;
            --border-color: #4a5568;
            --shadow-light: rgba(0, 0, 0, 0.3);
            --shadow-medium: rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        /* --- ç« ç¯€å…§é æ¨£å¼ (Zen Mode æ¨™æº–) --- */
        .zen-page-header, .chapter-content, .chapter-nav {
            max-width: 820px;         
            margin-left: 5%;          
            margin-right: auto;       
        }

        .chapter-content h2 {
            margin-top: 60px;
            margin-bottom: 30px;
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
        }
        
        .chapter-content h2 .section-num { 
            font-size: 1rem; 
            background: var(--accent-primary);
            color: #fff;
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: normal;
        }

        .chapter-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-top: 40px;
            margin-bottom: 20px;
        }

        .chapter-content p {
            margin-bottom: 25px;
            font-size: 1.05rem;
            color: var(--text-secondary);
            line-height: 1.9;
            letter-spacing: 0.02em;
        }

        .chapter-content ul, .chapter-content ol {
            margin-bottom: 30px;
            padding-left: 20px;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .chapter-content li { margin-bottom: 12px; }

        /* é‡é»æç¤ºæ¡† */
        .highlight-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--accent-primary);
            padding: 25px 30px;
            margin: 40px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .highlight-title {
            font-weight: bold;
            color: var(--accent-primary);
            margin-bottom: 15px;
            display: block;
            font-family: 'Fira Code', monospace;
            font-size: 1.1rem;
        }

        /* è­¦å‘Šæ¡† (Chapter 12 ç‰¹æœ‰) */
        .warning-box {
            background: rgba(243, 156, 18, 0.08); /* ç¨å¾®åŠ æ·±ä¸€é»é»èƒŒæ™¯ */
            border-left: 4px solid #f39c12;
            padding: 25px 30px;
            margin: 40px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .warning-title {
            font-weight: bold;
            color: #e67e22;
            margin-bottom: 15px;
            display: block;
            font-family: 'Fira Code', monospace;
            font-size: 1.1rem;
        }

        /* ç¨‹å¼ç¢¼å€å¡Š & è¤‡è£½æŒ‰éˆ• */
        .code-container { position: relative; margin: 40px 0; }
        
        pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 25px;
            padding-top: 45px;
            border-radius: 12px;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            font-size: 0.95rem;
            border: 1px solid #333;
            line-height: 1.6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.25);
        }

        .copy-btn {
            position: absolute;
            top: 10px; right: 10px;
            background-color: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: #ddd;
            padding: 6px 14px;
            border-radius: 6px;
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background-color: #ffffff;
            color: #000000;
            border-color: #ffffff;
            font-weight: bold;
        }
        
        .copy-btn.copied {
            background-color: rgba(255, 255, 255, 0.15);
            color: #ddd;
            border-color: #ffffff;
        }

        /* åœ–ç‰‡å®¹å™¨ */
        .img-container {
            width: 100%;
            max-width: 700px;
            height: 400px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin: 40px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }
        .img-container img { 
            max-width: 95%; 
            max-height: 95%; 
            object-fit: contain;
            border-radius: 4px; 
        }

        /* é€šç”¨è¡¨æ ¼æ¨£å¼ */
        .table-wrapper {
            overflow-x: auto;
            margin: 30px 0;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            min-width: 600px;
        }
        .comparison-table th {
            background: var(--accent-primary);
            color: #fff;
            padding: 12px 15px;
            text-align: left;
            white-space: nowrap;
        }
        .comparison-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            text-align: left;
            color: var(--text-primary);
            vertical-align: top;
        }
        .comparison-table tr:last-child td { border-bottom: none; }
        .comparison-table code {
            background: rgba(0,0,0,0.05);
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Fira Code', monospace;
        }

        /* --- ç‰¹æ®Šè™•ç†ï¼šé»ƒè‰²è­¦å‘Šæ¡†å…§çš„è¡¨æ ¼æ¨£å¼ --- */
        .warning-box .table-wrapper {
            background: transparent !important;
            border: none !important;
            margin: 10px 0;
        }
        .warning-box .comparison-table {
            background: transparent !important;
            box-shadow: none !important;
            min-width: 100%;
        }
        .warning-box .comparison-table th {
            background: rgba(230, 126, 34, 0.15) !important; /* æ·ºæ©˜è‰²èƒŒæ™¯ */
            color: #d35400 !important; /* æ·±æ©˜è‰²æ–‡å­— */
            border-bottom: 1px solid rgba(243, 156, 18, 0.3);
        }
        .warning-box .comparison-table td {
            border-bottom: 1px solid rgba(243, 156, 18, 0.2);
            color: var(--text-primary);
        }
        .warning-box .comparison-table tr:last-child td {
            border-bottom: none;
        }

        /* åº•éƒ¨å°èˆª */
        .chapter-nav {
            margin-top: 80px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            gap: 15px;
        }

        .nav-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.4); 
            min-width: 120px;
        }

        .nav-btn:hover {
            background-color: #ffffff !important;
            color: #000000 !important;
            border-color: #ffffff !important;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,255,255,0.1);
            font-weight: 700;
        }
        .nav-btn.menu-btn { border: 1px solid rgba(255, 255, 255, 0.4); }

        @media (max-width: 1200px) {
            .zen-page-header, .chapter-content, .chapter-nav { margin-left: 20px; margin-right: 20px; }
        }
        @media (max-width: 768px) {
            .chapter-nav { flex-direction: column; }
            .nav-btn { width: 100%; }
            .img-container { height: 300px; }
        }
        
        /* èªæ³•é«˜äº®æ¨£å¼ */
        .keyword{color:#ff79c6} .string{color:#f1fa8c} .comment{color:#6272a4} .number{color:#bd93f9} .function{color:#50fa7b} .type{color:#8be9fd}
    </style>
</head>
<body>
    
    <header class="zen-header">
        <div class="container">
            <nav>
                <a href="/" class="logo">TingNotes</a>
                <div class="nav-controls">
                    <button class="theme-toggle" onclick="toggleTheme()" title="åˆ‡æ›æ¨¡å¼">
                        <svg class="theme-icon" id="theme-icon" width="20" height="20" viewBox="0 0 24 24"></svg>
                    </button>
                    <button class="menu-trigger" onclick="toggleMobileMenu()">
                        <span class="menu-label">MENU</span>
                        <div class="hamburger-icon"><span></span><span></span></div>
                    </button>
                </div>
                <div class="hidden-nav-overlay">
                    <ul class="nav-links-vertical">
                        <li><a href="/Learning/index.html" class="nav-item"><span class="nav-num">01.</span> å­¸ç¿’ Learning</a></li>
                        <li><a href="/Career/index.html" class="nav-item"><span class="nav-num">02.</span> è·æ¶¯ Career</a></li>
                        <li><a href="/Travel/index.html" class="nav-item"><span class="nav-num">03.</span> æ—…éŠ Travel</a></li>
                        <li><a href="/Others/index.html" class="nav-item"><span class="nav-num">04.</span> é›œäº‹ Others</a></li>
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="zen-page-header fade-in">
                <div class="breadcrumb">
                    <a href="/Learning/c-pointer-tutorial/index.html">..</a> / Chapter <span id="chap-num-display">12</span>
                </div>
                <h1 class="page-title">Pointers and Dynamic Memory - Stack vs Heap</h1>
                <p class="page-subtitle">æ·±å…¥ç†è§£è¨˜æ†¶é«”ç®¡ç†èˆ‡å‹•æ…‹é…ç½®</p>
            </div>

            <article class="chapter-content fade-in">
                
                <h2><span class="section-num">1</span> C å‡½å¼åŸ·è¡Œèˆ‡è¨˜æ†¶é«”é…ç½®</h2>
                <p>
                    åœ¨ C èªè¨€ä¸­ï¼Œè¨˜æ†¶é«”ä¸»è¦åˆ†ç‚ºå››å€‹é‡è¦çš„å€åŸŸï¼Œæ¯å€‹å€åŸŸéƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œç‰¹æ€§ã€‚
                </p>
                
                <div class="img-container">
                    <img src="images/memory_layout.png" alt="Cå‡½å¼åŸ·è¡Œèˆ‡è¨˜æ†¶é«”é…ç½®åœ–">
                </div>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ“‚ è¨˜æ†¶é«”åˆ†å€ï¼ˆé«˜â†’ä½ä½å€ï¼‰</span>
                    <ul>
                        <li><strong>Heap</strong>ï¼šå‹•æ…‹é…ç½® malloc</li>
                        <li><strong>Stack</strong>ï¼šå‡½å¼çš„åƒæ•¸èˆ‡å€åŸŸè®Šæ•¸</li>
                        <li><strong>Static/Global</strong>ï¼šå…¨åŸŸè®Šæ•¸ã€staticè®Šæ•¸</li>
                        <li><strong>Code</strong>ï¼šå¯åŸ·è¡Œç¨‹å¼ç¢¼</li>
                    </ul>
                </div>

                <h3>ğŸ’¡ è®Šæ•¸åˆ†å¸ƒä½ç½®</h3>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>è®Šæ•¸</th>
                                <th>æ‰€å±¬å€åŸŸ</th>
                                <th>ä½æ–¼è¨˜æ†¶é«”å“ªä¸€å€</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>total</code></td>
                                <td>å…¨åŸŸè®Šæ•¸</td>
                                <td>Static / Global å€</td>
                            </tr>
                            <tr>
                                <td><code>a, b</code></td>
                                <td>main çš„å€åŸŸè®Šæ•¸</td>
                                <td>Stack</td>
                            </tr>
                            <tr>
                                <td><code>x, y, z</code></td>
                                <td>SquareOfSum çš„å€åŸŸè®Šæ•¸</td>
                                <td>Stack</td>
                            </tr>
                            <tr>
                                <td><code>x</code></td>
                                <td>Square çš„åƒæ•¸</td>
                                <td>Stackï¼ˆå‘¼å« Square æ™‚ï¼‰</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>ğŸ“Œ åŸ·è¡Œæµç¨‹</h3>
                <ul>
                    <li><strong>main()</strong> å‘¼å« <code>SquareOfSum(a, b)</code> â†’ å»ºç«‹æ–°çš„ Stack frame</li>
                    <li><strong>SquareOfSum()</strong> å‘¼å« <code>Square(x + y)</code> â†’ å†å»ºç«‹ä¸€å€‹ Stack frame</li>
                    <li>å‡½å¼çµæŸ â†’ ä¸€å±¤ä¸€å±¤é‡‹æ”¾ Stack</li>
                </ul>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ§  ç¸½çµä¸€å¥è©±è¨˜ä½</span>
                    <ul>
                        <li><code>total</code> æ˜¯è³‡æ–™ï¼ˆè®Šæ•¸ï¼‰â†’ æ”¾ Global å€</li>
                        <li><code>Square()</code> å’Œ <code>SquareOfSum()</code> æ˜¯ç¨‹å¼ç¢¼ â†’ æ”¾ Text å€</li>
                        <li>å®ƒå€‘å’Œ<code>main()</code> çš„é †åºç„¡é—œï¼Œå› ç‚ºã€Œå¯«åœ¨ä¸Šé¢ â‰  æ”¾åœ¨ä¸Šé¢ã€</li>
                    </ul>
                </div>

                <h2><span class="section-num">2</span> Stack Overflow æ˜¯ä»€éº¼ï¼Ÿ</h2>
                <p>
                    åœ¨ C èªè¨€ä¸­ï¼Œ<strong>Stack Overflow</strong>ï¼ˆå †ç–Šæº¢ä½ï¼‰æ˜¯æŒ‡ç¨‹å¼ä½¿ç”¨éå¤šçš„ stack è¨˜æ†¶é«”ï¼Œå°è‡´è¶…å‡ºç³»çµ±æ‰€é…ç½®çš„é™åˆ¶ï¼Œé€²è€Œç¨‹å¼å´©æ½°æˆ–ç”¢ç”Ÿæœªå®šç¾©è¡Œç‚ºã€‚
                </p>
                
                <div class="img-container">
                    <img src="images/stack_overflow.png" alt="Stack Overflow æ¦‚å¿µåœ–">
                </div>
                
                <h3>ğŸ”§ Stack æ˜¯ä»€éº¼ï¼Ÿ</h3>
                <p>Stack æ˜¯ C ç¨‹å¼ä¸­ç”¨ä¾†å„²å­˜ï¼š</p>
                <ul>
                    <li>å‡½å¼çš„çš„åƒæ•¸</li>
                    <li>å€åŸŸè®Šæ•¸ï¼ˆlocal variablesï¼‰</li>
                    <li>å›å‚³ä½å€ï¼ˆreturn addressï¼‰</li>
                </ul>
                <p>å®ƒçš„è¨˜æ†¶é«”å¤§å°é€šå¸¸æœ‰é™ï¼ˆé€šå¸¸å¹¾ MB è€Œå·²ï¼‰ã€‚</p>

                <div class="warning-box">
                    <span class="warning-title">âš ï¸ ä»€éº¼æƒ…æ³æœƒç™¼ç”Ÿ Stack Overflowï¼Ÿ</span>
                    <div class="table-wrapper">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>æƒ…æ³</th>
                                    <th>ç¯„ä¾‹</th>
                                    <th>èªªæ˜</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>éè¿´å‘¼å«å¤ªæ·±</td>
                                    <td><code>func() { func(); }</code></td>
                                    <td>æ¯æ¬¡å‘¼å«éƒ½æœƒç”¨ä¸€å€‹æ–°çš„ stack frame</td>
                                </tr>
                                <tr>
                                    <td>å€åŸŸè®Šæ•¸å¤ªå¤§</td>
                                    <td><code>int A[10000000];</code></td>
                                    <td>å€åŸŸé™£åˆ—å¤ªå¤§ï¼Œè¶…é stack å®¹é‡</td>
                                </tr>
                                <tr>
                                    <td>å¤šå±¤å‡½å¼å¤ªæ·±å‘¼å«</td>
                                    <td>å¤ªå¤šå‡½å¼ç–Šèµ·ä¾†</td>
                                    <td>ç´¯ç©å¤ªå¤š stack frame å°è‡´æ²’ä½</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>ğŸ”§ å¦‚ä½•é¿å… Stack Overflowï¼Ÿ</h3>
                <ul>
                    <li>é¿å…ç„¡é™éè¿´</li>
                    <li>ä¸è¦åœ¨ Stack å®£å‘Šå¤ªå¤§é™£åˆ—ï¼ˆæ”¹ç”¨ <code>malloc</code> å‹•æ…‹é…ç½® â†’ æ”¾åœ¨ Heapï¼‰</li>
                    <li>é¿å…éæ·±å‘¼å«ï¼ˆå³ DFSï¼‰</li>
                </ul>

                <h3>ğŸ”„ Stack Overflow vs Heap Overflowï¼Ÿ</h3>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>åˆ†é¡</th>
                                <th>Stack Overflow</th>
                                <th>Heap Overflow</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ç™¼ç”Ÿä½ç½®</td>
                                <td>å‡½å¼å‘¼å«éåº¦</td>
                                <td>å‹•æ…‹é…ç½®éåº¦ï¼ˆmallocï¼‰</td>
                            </tr>
                            <tr>
                                <td>å¸¸è¦‹åŸå› </td>
                                <td>éè¿´å¤ªæ·±ã€é™£åˆ—å¤ªå¤§</td>
                                <td>å¯«å…¥è¶…å‡ºé…ç½®çš„è¨˜æ†¶é«”ç¯„åœ</td>
                            </tr>
                            <tr>
                                <td>è§£æ±ºæ–¹å¼</td>
                                <td>æ¸›å°‘éè¿´/æ”¹ malloc</td>
                                <td>åŠ å¼·è¨˜æ†¶é«”é‚Šç•Œæª¢æŸ¥</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2><span class="section-num">3</span> Heap æ˜¯ä»€éº¼ï¼Ÿè©²å¦‚ä½•ä½¿ç”¨å®ƒï¼Ÿ</h2>
                <p>
                    åœ¨ <strong>C/C++</strong> ç¨‹å¼ä¸­ï¼Œ<strong>Heap</strong>ï¼ˆå †ç©å€ï¼‰æ˜¯ä¸€å¡Šå°ˆé–€çµ¦ç¨‹å¼<strong>å‹•æ…‹é…ç½®è¨˜æ†¶é«”çš„ç©ºé–“</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘å€‘ã€Œéœ€è¦å¤šå°‘ã€ä»€éº¼æ™‚å€™é…ç½®ã€ä½•æ™‚é‡‹æ”¾ã€éƒ½ç”±ç¨‹å¼è¨­è¨ˆå¸«ä¾†æ±ºå®šã€‚
                </p>
                
                <div class="img-container">
                    <img src="images/heap_structure.png" alt="Heapè¨˜æ†¶é«”é…ç½®åœ–">
                </div>

                <h3>ğŸ”§ Heap çš„åŸºæœ¬æ¦‚å¿µ</h3>
                <ul>
                    <li>Heap æ˜¯æ‡‰ç”¨ç¨‹å¼çš„ä¸€éƒ¨åˆ†è¨˜æ†¶é«”ç©ºé–“ï¼Œç”±ä½œæ¥­ç³»çµ±åˆ†é…ï¼Œå®¹é‡å¤§ã€‚</li>
                    <li>Heap è£¡çš„è³‡æ–™ä¸åƒ Stack æœƒè‡ªå‹•é‡‹æ”¾ï¼Œå¿…é ˆæ‰‹å‹•è™•ç†ã€‚</li>
                    <li>å¸¸ç”¨æ–¼å„²å­˜ï¼šé™£åˆ—ã€çµæ§‹ã€éˆçµä¸²åˆ—ç­‰å¤§å‹æˆ–ä¸å®šå¤§å°çš„è³‡æ–™ã€‚</li>
                </ul>
                <p>åœ¨ä¸Šåœ–ä¸­ï¼ŒHeap æ˜¯è¨˜æ†¶é«”çš„è—è‰²å€å¡Šï¼Œä½æ–¼ Stack ä¹‹ä¸Šï¼Œæ˜¯æ•´é«” Application's memory çš„ä¸€éƒ¨åˆ†ã€‚</p>

                <h3>ğŸ› ï¸ C/C++ ä¸­çš„ Heap ä½¿ç”¨æ–¹å¼</h3>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>èªè¨€</th>
                                <th>ä½¿ç”¨æ–¹å¼</th>
                                <th>ç¯„ä¾‹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>C</td>
                                <td>ä½¿ç”¨å‡½å¼ <code>malloc</code>ã€<code>calloc</code>ã€<code>realloc</code>ã€<code>free</code></td>
                                <td><code>int *p = malloc(4 * sizeof(int));</code></td>
                            </tr>
                            <tr>
                                <td>C++</td>
                                <td>ä½¿ç”¨é‹ç®—å­ <code>new</code>ã€<code>delete</code></td>
                                <td><code>int *p = new int[4];</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>é€™äº›å‡½å¼èˆ‡é‹ç®—å­éƒ½æœƒç›´æ¥åœ¨ Heap å€åŸŸèª¿é…è¨˜æ†¶é«”ã€‚</p>

                <h3>ğŸ“Œ æ³¨æ„äº‹é …</h3>
                <ul>
                    <li>Heap ä½¿ç”¨å¾Œå¿…é ˆé‡‹æ”¾ï¼š<code>free()</code>ï¼ˆCï¼‰ã€<code>delete</code>ï¼ˆC++ï¼‰</li>
                    <li>å¿˜è¨˜é‡‹æ”¾æœƒé€ æˆ<strong>è¨˜æ†¶é«”æ´©æ¼ï¼ˆMemory Leakï¼‰</strong>ã€‚</li>
                    <li>Stack æ˜¯ç³»çµ±è‡ªå‹•ç®¡ç†ï¼›Heap æ˜¯ç”±ä½ ä¾†ç®¡ç†ï¼</li>
                </ul>

                <h2><span class="section-num">4</span> malloc çš„è¨˜æ†¶é«”é…ç½®å‹•æ…‹èˆ‡åœ–è§£</h2>
                <p>
                    è®“æˆ‘å€‘é€éå…·é«”çš„ç¨‹å¼ç¢¼ç¯„ä¾‹ä¾†ç†è§£ malloc å¦‚ä½•åœ¨ Heap ä¸­é…ç½®è¨˜æ†¶é«”ã€‚
                </p>
                
                <div class="img-container">
                    <img src="images/malloc_process.png" alt="mallocè¨˜æ†¶é«”é…ç½®åœ–è§£">
                </div>

                <h3>ç¨‹å¼ä¸€é–‹å§‹çš„é…ç½®</h3>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>è¨˜æ†¶é«”å€åŸŸ</th>
                                <th>æè¿°</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Stackï¼ˆå †ç–Šï¼‰</td>
                                <td>å„²å­˜å€åŸŸè®Šæ•¸ <code>a</code> å’ŒæŒ‡æ¨™ <code>p</code>ï¼ˆæ­¤æ™‚ <code>p</code> å°šæœªåˆå§‹åŒ–ï¼‰</td>
                            </tr>
                            <tr>
                                <td>Heapï¼ˆå †ç©ï¼‰</td>
                                <td>é‚„æ²’æœ‰é…ç½®</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3>ç¬¬ä¸€æ¬¡ malloc åŸ·è¡Œæ™‚</h3>
                <div class="code-container">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>p = (<span class="type">int</span>*)<span class="function">malloc</span>(<span class="function">sizeof</span>(<span class="type">int</span>));</code></pre>
                </div>

                <ul>
                    <li><code>p</code> å–å¾— heap ä¸­ä¸€å¡Š 4 bytes è¨˜æ†¶é«”çš„åœ°å€ï¼ˆå‡è¨­ç‚º <code>200</code>ï¼‰</li>
                    <li><code>*p = 10</code>ï¼šå°‡å€¼ 10 å¯«å…¥ heap çš„é€™å¡Šè¨˜æ†¶é«”</li>
                </ul>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ§  è¨˜æ†¶é«”æ­¤æ™‚é•·é€™æ¨£ï¼š</span>
                    <p><strong>Stack:</strong> <code>a</code>: æœªçŸ¥å€¼, <code>p</code>: å„²å­˜ 200</p>
                    <p><strong>Heap:</strong> <code>200</code>: å€¼ç‚º 10</p>
                </div>

                <h3>æ¥ä¸‹ä¾†åŸ·è¡Œ free(p);</h3>
                <ul>
                    <li>heap ä¸Š <code>200</code> çš„ç©ºé–“è¢«é‡‹æ”¾</li>
                    <li>æ³¨æ„ï¼šé›–ç„¶ç©ºé–“é‡‹æ”¾äº†ï¼Œä½† <code>p</code> çš„å€¼ï¼ˆä»æ˜¯ <code>200</code>ï¼‰æ²’è¢«è‡ªå‹•æ¸…é™¤ï¼</li>
                </ul>

                <h3>ç¬¬äºŒæ¬¡ mallocï¼š</h3>
                <div class="code-container">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>p = (<span class="type">int</span>*)<span class="function">malloc</span>(<span class="function">sizeof</span>(<span class="type">int</span>));
*p = <span class="number">20</span>;</code></pre>
                </div>

                <ul>
                    <li>ç³»çµ±é‡æ–°é…ç½®äº†ä¸€å¡Š heap è¨˜æ†¶é«”ï¼ˆé€™æ¬¡æ˜¯ <code>400</code>ï¼‰</li>
                    <li>æŠŠå€¼ 20 å­˜é€² <code>*p</code></li>
                </ul>

                <div class="highlight-box">
                    <span class="highlight-title">ğŸ§  è¨˜æ†¶é«”ç¾åœ¨é•·é€™æ¨£ï¼š</span>
                    <p><strong>Stack:</strong> <code>a</code>: æœªçŸ¥, <code>p</code>: å„²å­˜ 400</p>
                    <p><strong>Heap:</strong> <code>400</code>: å€¼è®Šç‚º 20</p>
                </div>

                <h3>âœ… å°çµ</h3>
                <div class="table-wrapper">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>æ™‚é–“é»</th>
                                <th>Stack è¨˜æ†¶é«”</th>
                                <th>Heap è¨˜æ†¶é«”</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>åˆå§‹åŒ–</td>
                                <td><code>a</code> å’Œ <code>p</code> å°šæœªè³¦å€¼</td>
                                <td>ç„¡é…ç½®</td>
                            </tr>
                            <tr>
                                <td>ç¬¬ä¸€æ¬¡ malloc</td>
                                <td><code>p</code> â†’ æŒ‡å‘ <code>200</code></td>
                                <td><code>200</code> = 10</td>
                            </tr>
                            <tr>
                                <td>free(p)</td>
                                <td><code>p</code> ä¿ç•™ï¼Œä½† <code>200</code> è¢«é‡‹æ”¾</td>
                                <td>ç©ºé–“è®Šæˆå¯å†åˆ©ç”¨</td>
                            </tr>
                            <tr>
                                <td>ç¬¬äºŒæ¬¡ malloc</td>
                                <td><code>p</code> æŒ‡å‘ <code>400</code></td>
                                <td><code>400</code> = 20</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </article>

            <div class="chapter-nav fade-in">
                <a href="chapter11.html" id="prev-btn" class="nav-btn">&lt; PREV</a>
                <a href="/Learning/c-pointer-tutorial/index.html" class="nav-btn menu-btn">MENU</a>
                <a href="chapter13.html" id="next-btn" class="nav-btn">NEXT &gt;</a>
            </div>
        </div>
    </main>

    <footer class="zen-footer">
        <div class="container">
            <div class="footer-links">
                <a href="/about.html">About</a>
                <a href="mailto:contact@tingnotes.io">Contact</a>
            </div>
            <p class="copyright">Â© 2025 TingNotes.io</p>
        </div>
    </footer>

    <script>
        function copyCode(btn) {
            const pre = btn.parentElement.querySelector('pre');
            if (!pre) return;
            const code = pre.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }
    </script>

    <script type="module" src="/script.js"></script>
    <script src="../js/chapter.js"></script>

</body>
</html>